<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Página Web</title>
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
  <!-- Slider -->
  <link rel="stylesheet" href="./assets/css/owl.carousel.min.css">
  <!-- Theme Slider -->
  <link rel="stylesheet" href="./assets/css/owl.theme.default.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="./assets/css/app.css">
</head>
<body>
  <!-- Modal Inicio sesion Registro-->
  <div th:replace="menu::#modal-login"></div>
  <!-- End Modal Inicio sesion Registro-->
  <div class="fixed-actions">
    <div class="container">
      <a href="#" class="btn btn--primary btn--info">
        Informes
      </a>
      <a href="#" class="btn btn--whatsapp">
        <span>Contáctanos</span>
        <i class="fab fa-whatsapp"></i>
      </a>
    </div>
  </div>
  
  <!-- Header -->
  <div th:replace="menu :: #headerInicio"></div>
  <!-- End Header -->

  <main>
    <div class="container">
      <nav class="breadcrumb">
        <ul>
          <li>
            <a href="index.html">
              <i class="fa fa-home"></i>
            </a>
          </li>
          <li>
            <a href="carrito.html">
              Cesta de la compra
            </a>
          </li>
        </ul>
      </nav>
      
      <!-- header cart -->
      <nav class="cart-nav">
        <a th:href="@{/carrito}">
          <span>01</span>
          <span>Carrito de compra</span>
          <span>Revisa los cursos que has agregado</span>
        </a>
        <a class="active">
          <span>02</span>
          <span>Detalles de pago</span>
          <span>Llena tus datos y elige cómo pagar</span>
        </a>
        <a th:href="@{/finish-shop}">
          <span>03</span>
          <span>Compra realizada</span>
          <span>Pago aceptado, transacción exitos</span>
        </a>
      </nav>
      <!-- end header cart -->

      <p class="for-clients">¿Ya eres cliente? <a href="#" onclick="$('#form-for-clients').slideToggle(); return false;">Haz clic aquí para acceder</a></p>

      <form id="form-for-clients" action="#" class="hero-form shadow d-none" style="margin-bottom: 30px;">
        <div class="hero-form__body">

          <p style="margin-bottom: 1rem; font-weight: 500;">Si ya eres cliente, por favor, rellena tus datos a continuación. Si eres un nuevo cliente, continúa en la sección de facturación.</p>

          <div class="material-input material-input--primary">
            <input type="text" id="names" autocomplete="off">
            <label for="names">Nombres</label>
          </div>

          <div class="material-input material-input--primary">
            <input type="text" id="lastname" autocomplete="off">
            <label for="lastname">Apellidos</label>
          </div>

          <input class="cart-btn" type="submit" value="Iniciar sisión">

          <div style="margin-top: 1rem;">
            <a href="reset-password.html" style="text-decoration: none;">¿Olvidaste tu contraseña?</a>
          </div>
        </div>
      </form><!-- .card -->

      <div class="l-page-generic" style="margin-bottom: 40px;">
        <section class="l-page-generic__main">
          <form action="" class="detail__form">
            <div class="hero-form shadow">
              <div class="hero-form__body">
                <h2 style="line-height: 1; font-size: 25px; text-align: left; color: var(--black)">Detalles de facturacion</h2>

                <div class="material-input material-input--primary">
                  <input type="text" id="names" autocomplete="off">
                  <label for="names">Nombres</label>
                </div>

                <div class="material-input material-input--primary">
                  <input type="text" id="lastname" autocomplete="off">
                  <label for="lastname">Apellidos</label>
                </div>

                <div class="material-input material-input--primary">
                  <input type="tel" id="phone" autocomplete="off">
                  <label for="phone">Celular</label>
                </div>

                <div class="material-input material-input--primary">
                  <input type="email" id="email" autocomplete="off">
                  <label for="email">Email</label>
                </div>

                <div class="select">
                  <select id="course" class="form-control">
                    <option selected disabled>¿Qué quieres estudiar?</option>
                    <option value="1">Curso 1</option>
                    <option value="2">Curso 2</option>
                    <option value="3">Curso 3</option>
                  </select>
                  <i class="fa fa-angle-down"></i>
                </div>

                <div class="material-input material-input--primary">
                  <input type="document" id="document" autocomplete="off">
                  <label for="document">Documento</label>
                </div>

                <div class="material-input material-input--primary">
                  <input type="other" id="other" autocomplete="off">
                  <label for="other">Dato Necesario *</label>
                </div>

                <p class="fw5" style="margin-bottom: .5rem;">¿Factura?</p>
                <div style="margin-bottom: 1rem;">
                  <label style="margin-right: 10px">
                    <input type="radio" name="factura">
                    Si
                  </label>
                  <label>
                    <input type="radio" name="factura" checked>
                    No
                  </label>
                </div>

                <div class="factura">
                  <div class="material-input material-input--primary">
                    <input type="document" id="document" autocomplete="off">
                    <label for="document">Documento</label>
                  </div>

                  <div class="material-input material-input--primary">
                    <input type="other" id="other" autocomplete="off">
                    <label for="other">Dato Necesario *</label>
                  </div>
                </div>
              </div>
            </div><!-- .card -->
          </form>
        </section><!-- .l-page-generic__main -->
        <div class="l-page-generic__aside">
          <div class="hero-form shadow">
            <div class="hero-form__body">
              <h2 style="line-height: 1; font-size: 25px; text-align: left;">Código descuento</h2>
              <form action="validarCupon" method="post" style="display: flex; align-items: stretch;">
                <div class="material-input material-input--primary" style="margin: 0; flex-grow: 1;">
                  <input th:if="${descuento == 0}" style="text-transform: uppercase;" type="text" id="code" name="codigoCupon" autocomplete="off" required>
                  <input th:if="${descuento != 0}" style="text-transform: uppercase;" th:value="${carrito.cuponDescuento.codigo_cupondescuento}" disabled class="non-empty" type="text" id="code" name="codigoCupon" autocomplete="off" required>
                  <label for="code">Código</label>
                </div>
                <input th:if="${descuento == 0}" class="cart-btn" type="submit" value="Validar" style="margin-left: 10px;">
                <input th:if="${descuento != 0}" class="cart-btn" type="submit" value="Validar" style="margin-left: 10px;" disabled>
              </form>
            </div>
          </div>

          <div style="margin-top: 20px;">
            <div class="hero-form shadow">
              <div class="hero-form__body">
                <h2 style="line-height: 1; font-size: 25px; text-align: left; color: var(--black)">Tu pedido</h2>
                
                <table class="cart-table cart-table--small">
                  <thead>
                    <tr>
                      <th>Producto</th>
                      <th>Total</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!--<th:block th:if="${carrito.cuponDescuento != null and carrito.cuponDescuento.tipoDescuento_cupondescuento == 1}" th:with="descuento=${#numbers.formatDecimal(carrito.monto_total_carrito, 1, 'COMMA', 1, 'POINT')} * (${#numbers.formatDecimal(carrito.cuponDescuento.valorDescuento_cupondescuento, 1, 'COMMA', 1, 'POINT')} * 0.01)">
                      <span th:text="${descuento}"><span>
                    </th:block>
                    <th:block th:if="${carrito.cuponDescuento != null and carrito.cuponDescuento.tipoDescuento_cupondescuento == 2}" th:with="descuento=${#numbers.formatDecimal(carrito.cuponDescuento.valorDescuento_cupondescuento, 1, 'COMMA', 1, 'POINT')}">
                      dsa
                    </th:block>-->
                    <tr th:each="servicio :${carrito.servicios}">
                      <td>
                        <p th:text="${servicio.nombreServicio}">Excel Básico</p>
                      </td>
                      <td>
                        <p th:text="'S/ '+${#numbers.formatDecimal(servicio.precioFinalServicio, 1, 'COMMA', 1, 'POINT')} + '0'">S/. 279.00</p>
                      </td>
                    </tr>

                    <tr>
                      <td>
                        <p><strong>Subtotal</strong></p>
                      </td>
                      <td>
                        <p th:text="'S/ '+${#numbers.formatDecimal(carrito.monto_total_carrito, 1, 'COMMA', 1, 'POINT')} + '0'">S/. 279.00</p>
                      </td>
                    </tr>

                    <tr>
                      <td>
                        <p><strong>Cupon</strong></p>
                      </td>
                      <td>
                        <p>
                          <strong th:text="'S/. '+${#numbers.formatDecimal(descuento, 1, 'COMMA', 1, 'POINT')}" style="color: red; font-size: 18px;" >S/. 01</strong>
                          <!--<th:block th:if="${carrito.cuponDescuento != null and carrito.cuponDescuento.tipoDescuento_cupondescuento == 1}">
                            <strong  style="color: red; font-size: 18px;" th:text="'S/.'+ ${#numbers.formatDecimal(descuento, 1, 'COMMA', 1, 'POINT')} +'0'">S/. 0</strong>
                          </th:block>
                          <th:block th:if="${carrito.cuponDescuento != null and carrito.cuponDescuento.tipoDescuento_cupondescuento == 2}">
                            <strong  th:text="'S/.'+ ${#numbers.formatDecimal(descuento, 1, 'COMMA', 1, 'POINT')} +'0'" >S/. 0</strong>
                          </th:block>
                          <strong th:if="${carrito.cuponDescuento != null }" th:text="'S/.'+ ${#numbers.formatDecimal(descuento, 1, 'COMMA', 1, 'POINT')} +'0'" >S/. 0</strong>-->
                        </p>
                        
                      </td>
                    </tr>

                    <tr>
                      <td>
                        <p><strong>Total</strong></p>
                      </td>
                      <td>
                        <p><strong style="color: #34c759; font-size: 18px;" th:text="'S/ '+(${#numbers.formatDecimal(carrito.monto_total_carrito - descuento, 1, 'COMMA', 1, 'POINT')}) + '0'">S/. 279.00</strong></p>
                      </td>
                    </tr>
                  </tbody>
                </table>

                  <p style="font-size: 14px;">
                    <strong style="color: var(--gris); font-weight: 500;">Paga con tarjetas de VisaNet Perú</strong>
                    <br>
                    Realiza tu pago con tarjeta crédito o débito
                  </p>

                  <img src="https://www.zegelvirtual.com/sites/default/files/payment-logos.png" alt="" style="margin: 1rem 0;">

                  <label class="checkbox" style="margin-bottom: 1.5rem;">
                    <input type="checkbox">
                    <span>
                      Acepto haber leído las <a href="#">políticas de privacidad</a> y los <a href="#">términos y condiciones</a>
                    </span>.
                  </label>

                  <input class="cart-btn cart-btn--block" type="button" value="Procesar con VISA" disabled>
                </div>
              </div>
            </div><!-- .card -->
          </div>
        </div>
      </div><!-- .l-page-generic -->
    </div><!-- .container -->
  </main>

  <div th:replace="menu :: #footer_inicio"></div>

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <!-- OWL Slider -->
  <script src="./assets/js/owl.carousel.min.js"></script>
  <!-- Scripts -->
  <script src="./assets/js/app.js"></script>

  

</body>
</html>